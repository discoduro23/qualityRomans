<html>
  <head>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FZVNP8MQCV"></script>
<script  src="romans.js"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FZVNP8MQCV');

  function init() { 
  
  // Load elements once to avoid repetition on every invocation
  var modeCheckbox = document.querySelector('input[type=\'checkbox\']');
  var header = document.querySelector('h1');
  var convertButton = document.querySelector('.convert-button');
  var outputArea = document.querySelector('.convert-output');
  var inputArea = document.querySelector('input[type=\'text\']');


  modeCheckbox.addEventListener('change', function(e) {
    header.innerHTML = getModeTitle(e.target.checked);
  });

  const getModeTitle = function(integerToRoman) {
    return integerToRoman ? 'Integer To Roman' : 'Roman To Integer';
  };

  // Now, the convertion operation does only perform the operation. 
  // Things we have extracted to this listener: 
  // 1 - Read the UI inputs (inputArea.value)
  // 2 - Write the UI output (outputArea.innerHTML)
  // 3 - Show error messages
  // This is cleaner and also removes code duplications
  convertButton.addEventListener('click', function() {
    var inputValue = inputArea.value;
    var convertion = modeCheckbox.checked ? convertIntegerToRoman(inputValue) : convertRomanToInteger(inputValue);
    if (convertion.result) {
      outputArea.innerHTML = convertion.value;
      gtag('event', 'convertion_calculated', {
        'covert_value' : convertion.value
        });
    } else {
      alert(convertion.message);
    }
  });

}
</script>
    <link rel="stylesheet" href="romans.css">
  </head>
  <body onload="init()">
    <main class="container">
      <section class="content">
        <h1>Roman To Integer</h1>
        <div class="group">
          <input type="checkbox" name="mode-selector" />
          <label for="mode-selector">Change Mode</label>
        </div>
        <div class="group">
          <input type="text" name="conversion-input" />
        </div>
        <span class="convert-button">Convert</span>
        <p class="convert-output"></p>
      </section>
    </main>
  </body>
</html>